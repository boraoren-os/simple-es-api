"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const AWS = require('aws-sdk');
const ddb = new AWS.DynamoDB.DocumentClient();
const event_aggregator_1 = require("./lib/event-aggregator");
const getModel_1 = require("./getModel");
const primaryKeyDefinition = { partitionKey: process.env.PARTITION_KEY, sortKey: process.env.SORT_KEY };
module.exports.aggregator = async (event) => {
    console.log({ event: JSON.stringify(event, null, 4) });
    for (let record of event.Records) {
        if (record.eventName === "REMOVE") {
            continue;
        }
        if (record.dynamodb) {
            const apiEvent = AWS.DynamoDB.Converter.unmarshall(record.dynamodb.NewImage);
            if (!apiEvent[primaryKeyDefinition.sortKey].startsWith('event_')) {
                console.log('This is not an avent');
                continue;
            }
            await event_aggregator_1.processEvent(apiEvent, primaryKeyDefinition);
        }
    }
};
module.exports.create = async function createEvent(event) {
    const eventModel = JSON.parse(event.body);
    try {
        await validateModel(primaryKeyDefinition, eventModel);
    }
    catch (err) {
        return {
            isBase64Encoded: false,
            statusCode: 400,
            headers: { 'content-type': 'text/plain' },
            body: err.message
        };
    }
    try {
        const updatedEventModel = await saveEvent(primaryKeyDefinition, eventModel);
        return {
            statusCode: 200,
            body: JSON.stringify(updatedEventModel)
        };
    }
    catch (err) {
        return {
            isBase64Encoded: false,
            statusCode: 500,
            headers: { 'content-type': 'text/plain' },
            body: 'An error occurred while trying to save your event. Please try again later.'
        };
    }
};
async function validateModel(primaryKeyDefinition, eventModel) {
    if (!eventModel[primaryKeyDefinition.partitionKey]) {
        throw new Error(`Please provide the '${primaryKeyDefinition.partitionKey}' on your event.`);
    }
    if (!eventModel.type) {
        throw new Error("Please provide a 'type' on your event.");
    }
    // additional validations will go here.
}
async function saveEvent({ partitionKey, sortKey }, eventModel) {
    const sk = `event_${new Date().toISOString()}`;
    const newModel = { ...eventModel, [sortKey]: sk };
    await ddb.put({ TableName: process.env.TABLE_NAME, Item: newModel }).promise();
    return newModel;
}
const get = async function getHandler(event) {
    let [_, aggregate, id] = event.path.split("/");
    aggregate = aggregate || 'default';
    if (!id) {
        const models = await getModel_1.getModels(aggregate, event.headers && event.headers.ExclusiveStartKey);
        return {
            isBase64Encoded: false,
            statusCode: 200,
            headers: {
                'content-type': 'application/json',
                'LastEvaluatedKey': models.LastEvaluatedKey && models.LastEvaluatedKey.id
            },
            body: JSON.stringify(models.Items)
        };
    }
    else {
        const model = await getModel_1.getModel({
            partitionKey: process.env.PARTITION_KEY,
            sortKey: process.env.SORT_KEY
        }, aggregate, id);
        return {
            isBase64Encoded: false,
            statusCode: 200,
            headers: { 'content-type': 'application/json' },
            body: JSON.stringify(model.Item)
        };
    }
};
exports.get = get;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMvQixNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7QUFFOUMsNkRBQThEO0FBRTlELHlDQUErQztBQU8vQyxNQUFNLG9CQUFvQixHQUFlLEVBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVMsRUFBQyxDQUFDO0FBR3BILE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssRUFBRSxLQUEwQixFQUFFLEVBQUU7SUFDN0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ3JELEtBQUssSUFBSSxNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sRUFBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQy9CLFNBQVM7U0FDWjtRQUNELElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRTtZQUNqQixNQUFNLFFBQVEsR0FBdUIsR0FBRyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUyxDQUFDLENBQUM7WUFDbEcsSUFBSSxDQUFFLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLENBQVksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQzFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQztnQkFDcEMsU0FBUzthQUNaO1lBQ0QsTUFBTSwrQkFBWSxDQUFDLFFB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LE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO2FBQzVFO1lBQ0QsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztTQUNyQyxDQUFDO0tBRUw7U0FBTTtRQUNILE1BQU0sS0FBSyxHQUFHLE1BQU0sbUJBQVEsQ0FBQztZQUN6QixZQUFZLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFjO1lBQ3hDLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVM7U0FDakMsRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDbEIsT0FBTztZQUNILGVBQWUsRUFBRSxLQUFLO1lBQ3RCLFVBQVUsRUFBRSxHQUFHO1lBQ2YsT0FBTyxFQUFFLEVBQUMsY0FBYyxFQUFFLGtCQUFrQixFQUFDO1lBQzdDLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7U0FDbkMsQ0FBQztLQUNMO0FBQ0wsQ0FBQyxDQUFDO0FBUU0sa0JBQUciLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBV1MgPSByZXF1aXJlKCdhd3Mtc2RrJyk7XG5jb25zdCBkZGIgPSBuZXcgQVdTLkR5bmFtb0RCLkRvY3VtZW50Q2xpZW50KCk7XG5cbmltcG9ydCB7QVBJRXZlbnQsIHByb2Nlc3NFdmVudH0gZnJvbSAnLi9saWIvZXZlbnQtYWdncmVnYXRvcic7XG5pbXBvcnQge0R5bmFtb0RCU3RyZWFtRXZlbnR9IGZyb20gXCJhd3MtbGFtYmRhXCI7XG5pbXBvcnQge2dldE1vZGVsLCBnZXRNb2RlbHN9IGZyb20gJy4vZ2V0TW9kZWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByaW1hcnlLZXkge1xuICAgIHBhcnRpdGlvbktleTogc3RyaW5nO1xuICAgIHNvcnRLZXk6IHN0cmluZztcbn1cblxuY29uc3QgcHJpbWFyeUtleURlZmluaXRpb246IFByaW1hcnlLZXkgPSB7cGFydGl0aW9uS2V5OiBwcm9jZXNzLmVudi5QQVJUSVRJT05fS0VZISwgc29ydEtleTogcHJvY2Vzcy5lbnYuU09SVF9LRVkhfTtcblxuXG5tb2R1bGUuZXhwb3J0cy5hZ2dyZWdhdG9yID0gYXN5bmMgKGV2ZW50OiBEeW5hbW9EQlN0cmVhbUV2ZW50KSA9PiB7XG4gICAgY29uc29sZS5sb2coe2V2ZW50OiBKU09OLnN0cmluZ2lmeShldmVudCwgbnVsbCwgNCl9KTtcbiAgICBmb3IgKGxldCByZWNvcmQgb2YgZXZlbnQuUmVjb3Jkcykge1xuICAgICAgICBpZiAocmVjb3JkLmV2ZW50TmFtZSA9PT0gXCJSRU1PVkVcIikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY29yZC5keW5hbW9kYikge1xuICAgICAgICAgICAgY29uc3QgYXBpRXZlbnQ6IEFQSUV2ZW50ID0gPEFQSUV2ZW50PkFXUy5EeW5hbW9EQi5Db252ZXJ0ZXIudW5tYXJzaGFsbChyZWNvcmQuZHluYW1vZGIuTmV3SW1hZ2UhKTtcbiAgICAgICAgICAgIGlmICghKGFwaUV2ZW50W3ByaW1hcnlLZXlEZWZpbml0aW9uLnNvcnRLZXldIGFzIHN0cmluZykuc3RhcnRzV2l0aCgnZXZlbnRfJykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGhpcyBpcyBub3QgYW4gYXZlbnQnKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NFdmVudChhcGlFdmVudCwgcHJpbWFyeUtleURlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMuY3JlYXRlID0gYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXZlbnQoZXZlbnQ6IGFueSkge1xuXG4gICAgY29uc3QgZXZlbnRNb2RlbCA9IEpTT04ucGFyc2UoZXZlbnQuYm9keSk7XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdmFsaWRhdGVNb2RlbChwcmltYXJ5S2V5RGVmaW5pdGlvbiwgZXZlbnRNb2RlbCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgICAgICAgICAgaGVhZGVyczogeydjb250ZW50LXR5cGUnOiAndGV4dC9wbGFpbid9LFxuICAgICAgICAgICAgYm9keTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRFdmVudE1vZGVsID0gYXdhaXQgc2F2ZUV2ZW50KHByaW1hcnlLZXlEZWZpbml0aW9uLCBldmVudE1vZGVsKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRFdmVudE1vZGVsKVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogNTAwLFxuICAgICAgICAgICAgaGVhZGVyczogeydjb250ZW50LXR5cGUnOiAndGV4dC9wbGFpbid9LFxuICAgICAgICAgICAgYm9keTogJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBzYXZlIHlvdXIgZXZlbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJ1xuICAgICAgICB9XG4gICAgfVxufTtcblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVNb2RlbChwcmltYXJ5S2V5RGVmaW5pdGlvbjogUHJpbWFyeUtleSwgZXZlbnRNb2RlbDogSUV2ZW50KSB7XG4gICAgaWYgKCFldmVudE1vZGVsW3ByaW1hcnlLZXlEZWZpbml0aW9uLnBhcnRpdGlvbktleV0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQbGVhc2UgcHJvdmlkZSB0aGUgJyR7cHJpbWFyeUtleURlZmluaXRpb24ucGFydGl0aW9uS2V5fScgb24geW91ciBldmVudC5gKTtcbiAgICB9XG5cbiAgICBpZiAoIWV2ZW50TW9kZWwudHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhICd0eXBlJyBvbiB5b3VyIGV2ZW50LlwiKTtcbiAgICB9XG4gICAgLy8gYWRkaXRpb25hbCB2YWxpZGF0aW9ucyB3aWxsIGdvIGhlcmUuXG59XG5cblxuYXN5bmMgZnVuY3Rpb24gc2F2ZUV2ZW50KHtwYXJ0aXRpb25LZXksIHNvcnRLZXl9OiBQcmltYXJ5S2V5LCBldmVudE1vZGVsOiBJRXZlbnQpIHtcbiAgICBjb25zdCBzayA9IGBldmVudF8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1gO1xuICAgIGNvbnN0IG5ld01vZGVsID0gey4uLmV2ZW50TW9kZWwsIFtzb3J0S2V5XTogc2t9O1xuICAgIGF3YWl0IGRkYi5wdXQoe1RhYmxlTmFtZTogcHJvY2Vzcy5lbnYuVEFCTEVfTkFNRSwgSXRlbTogbmV3TW9kZWx9KS5wcm9taXNlKCk7XG4gICAgcmV0dXJuIG5ld01vZGVsO1xufVxuXG5jb25zdCBnZXQgPSBhc3luYyBmdW5jdGlvbiBnZXRIYW5kbGVyKGV2ZW50OiBhbnkpIHtcbiAgICBsZXQgW18sIGFnZ3JlZ2F0ZSwgaWRdID0gZXZlbnQucGF0aC5zcGxpdChcIi9cIik7XG5cblxuICAgIGFnZ3JlZ2F0ZSA9IGFnZ3JlZ2F0ZSB8fCAnZGVmYXVsdCc7XG5cbiAgICBpZiAoIWlkKSB7XG4gICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IGdldE1vZGVscyhhZ2dyZWdhdGUsIGV2ZW50LmhlYWRlcnMgJiYgZXZlbnQuaGVhZGVycy5FeGNsdXNpdmVTdGFydEtleSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogMjAwLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ0xhc3RFdmFsdWF0ZWRLZXknOiBtb2RlbHMuTGFzdEV2YWx1YXRlZEtleSAmJiBtb2RlbHMuTGFzdEV2YWx1YXRlZEtleS5pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG1vZGVscy5JdGVtcylcbiAgICAgICAgfTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gYXdhaXQgZ2V0TW9kZWwoe1xuICAgICAgICAgICAgcGFydGl0aW9uS2V5OiBwcm9jZXNzLmVudi5QQVJUSVRJT05fS0VZISxcbiAgICAgICAgICAgIHNvcnRLZXk6IHByb2Nlc3MuZW52LlNPUlRfS0VZIVxuICAgICAgICB9LCBhZ2dyZWdhdGUsIGlkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzQmFzZTY0RW5jb2RlZDogZmFsc2UsXG4gICAgICAgICAgICBzdGF0dXNDb2RlOiAyMDAsXG4gICAgICAgICAgICBoZWFkZXJzOiB7J2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShtb2RlbC5JdGVtKVxuICAgICAgICB9O1xuICAgIH1cbn07XG5cbmludGVyZmFjZSBJRXZlbnQge1xuICAgIHR5cGU6IHN0cmluZztcblxuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbn1cblxuZXhwb3J0IHtnZXR9O1xuIl19