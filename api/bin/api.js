#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("@aws-cdk/core");
const api_stack_1 = require("../lib/api-stack");
const fs_1 = require("fs");
const path = require('path');
const app = new cdk.App();
const aggregators = fs_1.readdirSync(path.resolve('handlers/lib/events'), { withFileTypes: true })
    .filter(d => d.isDirectory())
    .map(d => d.name);
const props = {
    buildAPIGateway: true,
    aggregators,
    ...require('../apiStack.props.json')
};
new api_stack_1.ApiStack(app, 'ApiStack', props);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxxQ0FBc0M7QUFDdEMsZ0RBQTRDO0FBQzVDLDJCQUFpQztBQUNqQyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFFMUIsTUFBTSxXQUFXLEdBQUcsZ0JBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDLEVBQUUsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLENBQUM7S0FDeEYsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0tBQzVCLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUV0QixNQUFNLEtBQUssR0FBRztJQUNWLGVBQWUsRUFBRSxJQUFJO0lBQ3JCLFdBQVc7SUFDWCxHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztDQUN2QyxDQUFDO0FBRUYsSUFBSSxvQkFBUSxDQUFDLEdBQUcsRUFBRSxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG5pbXBvcnQgJ3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3Rlcic7XG5pbXBvcnQgY2RrID0gcmVxdWlyZSgnQGF3cy1jZGsvY29yZScpO1xuaW1wb3J0IHsgQXBpU3RhY2sgfSBmcm9tICcuLi9saWIvYXBpLXN0YWNrJztcbmltcG9ydCB7IHJlYWRkaXJTeW5jIH0gZnJvbSAnZnMnO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG5cbmNvbnN0IGFnZ3JlZ2F0b3JzID0gcmVhZGRpclN5bmMocGF0aC5yZXNvbHZlKCdoYW5kbGVycy9saWIvZXZlbnRzJyksIHsgd2l0aEZpbGVUeXBlczogdHJ1ZSB9KVxuICAgIC5maWx0ZXIoZCA9PiBkLmlzRGlyZWN0b3J5KCkpXG4gICAgLm1hcChkID0+IGQubmFtZSk7XG5cbmNvbnN0IHByb3BzID0ge1xuICAgIGJ1aWxkQVBJR2F0ZXdheTogdHJ1ZSxcbiAgICBhZ2dyZWdhdG9ycyxcbiAgICAuLi5yZXF1aXJlKCcuLi9hcGlTdGFjay5wcm9wcy5qc29uJylcbn07XG5cbm5ldyBBcGlTdGFjayhhcHAsICdBcGlTdGFjaycsIHByb3BzKTtcbiJdfQ==